{
	"info": {
		"_postman_id": "af4a442e-6dd8-44a6-ab54-aae209d2b49d",
		"name": "Salesforce Data Cloud APIs",
		"description": "This is a collection of 45+ requests for the following Salesforce Data Cloud APIs:\n\n<table><tbody><tr><td><ul><li><p>Profile API</p></li><li><p>Query API</p></li><li><p>Calculated Insights API</p></li><li><p>Metadata API</p></li><li><p>Ingestion API</p></li><li><p>Segmentation API</p></li></ul></td></tr></tbody></table>\n\nThe collection is divided into 2 API types.\n\n- **Direct APIs** - allows you to perform some of the Salesforce CDP application tasks programmatically via a Direct API to the underlying data store. This is the preferred approach to API connections.\n- **Connect APIs** - The Connect APIs allow users to make the same API calls directly from Salesforce’s connect interface. This allows for these APIs to be called in flows as well.\n    \n\nCalling APIs directly using the non connect method typically offers the best performance. However, there are use cases where that doesn't make sense. Therefore, please be advised that calling CONNECT APIs directly does not conform to the same SLAs that calling the API directly offers.\n\n**⚠️ Disclaimers:**\n\n- This collection is provided as-is. It's not officially supported by Salesforce or covered by SLAs.\n- API documentation is not provided with the collection. Please refer to the [official documentation](https://developer.salesforce.com/docs/atlas.en-us.c360a_api.meta/c360a_api/c360a_api_quick_start.htm).\n- To help us better understand usage of the collection, we leverage Google Analytics. If you would like to opt out of the tracking, you can remove the Pre-request Script set at the collection level.\n    \n\nℹ️ Report issues and ask questions [here](https://github.com/salesforce-marketingcloud/c360-postman/issues).\n\n## Get started\n\nFollow [this documentation](https://github.com/salesforce-marketingcloud/c360-postman) to get started with the collection.\n\n## Variables Reference\n\nThe collection relies on the following variables:\n\n| Variable | Example Value | Description | Used In Direct APIs | Used In Connect APIs |\n| --- | --- | --- | --- | --- |\n| `loginUrl` | login.salesforce.com | Using login.salesforce.com will be fine unless you are using a sandbox. | X | X |\n| `version` | 52.0 | Salesforce API version number |  | X |\n| `clientId` | 3MVG9l2zHsylwlpR6H5xByqIHvFbLVATgzkY... | Consumer key from the connected app. | X | X |\n| `clientSecret` | 775C20434DB475FC326765353AF5210D4... | Consumer secret from the connected app. |  | X |\n| `privateKey` | \\-----BEGIN RSA PRIVATE KEY----- xxxxxxxx  <br>\\-----END RSA PRIVATE KEY----- | Contents of `host.key` file. | X |  |\n| `userName` | [aaroncates@aaroncates-20210405.demo](mailto:aaroncates@aaroncates-20210405.demo) | User Name of the authorized user. | X | X |\n| `password` | superSecretPassword1! | Password of the authorized user. |  | X |\n| `securityToken` | fVhwzeDFMrAh4IC9hS | Salesforce security token for the authorized user. Details for securing a token available [here](https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_concepts_security.htm). |  | X |\n\nDetail documentation around these variables is available [here](https://github.com/salesforce-marketingcloud/c360-postman/blob/main/install-the-collection.md).",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "Direct APIs",
			"item": [
				{
					"name": "Ingestion API",
					"item": [
						{
							"name": "Streaming",
							"item": [
								{
									"name": "Insert Records",
									"_postman_id": "179e58db-d884-452c-a8b0-7928fd490245",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"data\": [\n        {\n            \"name\": \"Streaming Test12\",\n            \"billing_city\": \"CA\"\n        }\n    ]\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/sources/CMI_Test/account"
									},
									"response": [
										{
											"id": "85f36d8d-0107-4e83-92c7-15e3d6546dd5",
											"name": "Insert Records",
											"originalRequest": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\n       \"data\": [{\n        \"maid\":101,\n        \"first_name\":\"Sandeep\",\n        \"last_name\":\"Aulakh\",\n        \"email\":\"saulakh@salesforce-nto.com\",\n        \"gender\":\"Male\",\n        \"city\":\"Wilton\",\n        \"state\":\"CT\",\n        \"created\":\"2021-10-22T09:11:11.816319Z\"\n    },\n    {\n        \"maid\":102,\n        \"first_name\":\"Aaron\",\n        \"last_name\":\"Cates\",\n        \"email\":\"acates@salesforce-nto.com\",\n        \"gender\":\"Male\",\n        \"city\":\"San Francisco\",\n        \"state\":\"CA\",\n        \"created\":\"2021-10-22T09:11:11.816319Z\"\n    }\n]}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/sources/Event_API/runner_profiles"
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"accepted\": true\n}"
										}
									]
								},
								{
									"name": "Insert Records bulk",
									"_postman_id": "ab28dc0e-204e-4d0b-881f-d71424cdaa18",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"data\": [\n        {\n            \"name\": \"Streaming Test13\",\n            \"cantidad\": \"1\",\n            \"nacimiento\": \"1997-03-11\",\n            \"cierre\": \"2023-06-15T08:00:00.000Z\"\n        }\n    ]\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/sources/CMI_Test/bulk"
									},
									"response": [
										{
											"id": "a22c0f8e-31ee-4dff-a58d-72b9f28e9207",
											"name": "Insert Records",
											"originalRequest": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\n       \"data\": [{\n        \"maid\":101,\n        \"first_name\":\"Sandeep\",\n        \"last_name\":\"Aulakh\",\n        \"email\":\"saulakh@salesforce-nto.com\",\n        \"gender\":\"Male\",\n        \"city\":\"Wilton\",\n        \"state\":\"CT\",\n        \"created\":\"2021-10-22T09:11:11.816319Z\"\n    },\n    {\n        \"maid\":102,\n        \"first_name\":\"Aaron\",\n        \"last_name\":\"Cates\",\n        \"email\":\"acates@salesforce-nto.com\",\n        \"gender\":\"Male\",\n        \"city\":\"San Francisco\",\n        \"state\":\"CA\",\n        \"created\":\"2021-10-22T09:11:11.816319Z\"\n    }\n]}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/sources/Event_API/runner_profiles"
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"accepted\": true\n}"
										}
									]
								},
								{
									"name": "Delete Records",
									"_postman_id": "f3f5c0c5-0c91-432a-97d4-a0e45a39e080",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "DELETE",
										"header": [],
										"url": {
											"raw": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/sources/Event_API/runner_profiles?ids=101",
											"protocol": "https",
											"host": [
												"{{dne_cdpOffcoreUrl}}"
											],
											"path": [
												"api",
												"v1",
												"ingest",
												"sources",
												"Event_API",
												"runner_profiles"
											],
											"query": [
												{
													"key": "ids",
													"value": "101"
												}
											]
										}
									},
									"response": [
										{
											"id": "3fe3ba3c-a86a-45ef-81a2-7500ff4d34a2",
											"name": "Delete Records",
											"originalRequest": {
												"method": "DELETE",
												"header": [],
												"url": {
													"raw": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/sources/Event_API/runner_profiles?ids=101",
													"protocol": "https",
													"host": [
														"{{dne_cdpOffcoreUrl}}"
													],
													"path": [
														"api",
														"v1",
														"ingest",
														"sources",
														"Event_API",
														"runner_profiles"
													],
													"query": [
														{
															"key": "ids",
															"value": "101"
														}
													]
												}
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"accepted\": true\n}"
										}
									]
								},
								{
									"name": "Sync Record Validation",
									"_postman_id": "f5daa8e7-c2c0-4bb0-ba93-d7ea1badd23a",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n       \"data\": [{\n        \"maid\":101,\n        \"first_name\":\"Sandeep\",\n        \"last_name\":\"Aulakh\",\n        \"email\":\"saulakh@salesforce-nto.com\",\n        \"gender\":\"Male\",\n        \"city\":\"Wilton\",\n        \"state\":\"CT\",\n        \"created\":\"2021-10-22T09:11:11.816319Z\"\n    },\n    {\n        \"maid\":102,\n        \"first_name\":\"Aaron\",\n        \"last_name\":\"Cates\",\n        \"email\":\"acates@salesforce-nto.com\",\n        \"gender\":\"Male\",\n        \"city\":\"San Francisco\",\n        \"state\":\"CA\",\n        \"created\":\"2021-10-22T09:11:11.816319Z\"\n    }\n]}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/sources/Event_API/runner_profiles/actions/test"
									},
									"response": [
										{
											"id": "0992ac8a-5c07-4716-98ee-9a2334f27577",
											"name": "Sync Record Validation",
											"originalRequest": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\n       \"data\": [{\n        \"maid\":101,\n        \"first_name\":\"Sandeep\",\n        \"last_name\":\"Aulakh\",\n        \"email\":\"saulakh@salesforce-nto.com\",\n        \"gender\":\"Male\",\n        \"city\":\"Wilton\",\n        \"state\":\"CT\",\n        \"created\":\"2021-10-22T09:11:11.816319Z\"\n    },\n    {\n        \"maid\":102,\n        \"first_name\":\"Aaron\",\n        \"last_name\":\"Cates\",\n        \"email\":\"acates@salesforce-nto.com\",\n        \"gender\":\"Male\",\n        \"city\":\"San Francisco\",\n        \"state\":\"CA\",\n        \"created\":\"2021-10-22T09:11:11.816319Z\"\n    }\n]}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/sources/Event_API/runner_profiles/actions/test"
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"accepted\": true\n}"
										}
									]
								}
							],
							"_postman_id": "d5d9cee5-fb8e-44b1-918b-226d27498118",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "2ffd34bd-35ea-427a-b6ff-10a93d4b9183",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "53cbfbd0-c9da-4168-9db5-350114a56a3e",
										"type": "text/javascript",
										"exec": [
											""
										]
									}
								}
							],
							"_postman_isSubFolder": true
						},
						{
							"name": "Bulk",
							"item": [
								{
									"name": "Create Job",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "af6393e9-e41b-422a-a9d0-0c2923737c4b",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"_postman_id": "82cb4788-f531-4bf0-b5e2-b95eb2b03232",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"object\": \"test\",\n    \"sourceName\": \"CMI_Test\",\n    \"operation\": \"upsert\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs"
									},
									"response": [
										{
											"id": "d68cfff2-3d01-49c9-81a4-83db981534f6",
											"name": "Create Job",
											"originalRequest": {
												"method": "POST",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\n   \"object\":\"runner_profiles\",\n   \"sourceName\":\"Event_API\",\n   \"operation\":\"upsert\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs"
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"object\": \"runner_profiles\",\n    \"id\": \"78f56f55-c00a-4e20-ab7d-03307a319ff2\",\n    \"operation\": \"upsert\",\n    \"sourceName\": \"Event_API\",\n    \"createdById\": \"0053y00000FUGfBAAX\",\n    \"createdDate\": \"2021-10-28T19:44:20.284675Z\",\n    \"systemModstamp\": \"2021-10-28T19:44:20.284675Z\",\n    \"state\": \"Open\",\n    \"contentType\": \"CSV\",\n    \"apiVersion\": \"v1\",\n    \"contentUrl\": \"/api/v1/ingest/jobs/78f56f55-c00a-4e20-ab7d-03307a319ff2/batches\"\n}"
										}
									]
								},
								{
									"name": "Upload Job",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "42d1de9c-6343-454e-8946-bb970fcbf7ee",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"_postman_id": "24b5cebb-027e-4a86-ab31-cf7587791cf3",
									"protocolProfileBehavior": {
										"disabledSystemHeaders": {},
										"disableBodyPruning": true
									},
									"request": {
										"method": "PUT",
										"header": [
											{
												"key": "Content-Type",
												"value": "text/csv"
											},
											{
												"key": "Content-Length",
												"value": "0",
												"disabled": true
											}
										],
										"body": {
											"mode": "file",
											"file": {
												"src": "/Users/jesusalvarez/Library/CloudStorage/OneDrive-FreewayPremiumOutsourcingS.A/Documentos/CMI CDP/PruebaCarga.csv"
											},
											"options": {
												"file": {}
											}
										},
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/f49b6abd-db8f-4d49-a03e-d2e9ac1938f1/batches"
									},
									"response": [
										{
											"id": "6f6a03ad-985b-4535-9d17-a187bef52150",
											"name": "Upload Job",
											"originalRequest": {
												"method": "PUT",
												"header": [
													{
														"key": "Content-Type",
														"value": "text/csv",
														"type": "text",
														"disabled": true
													},
													{
														"key": "Content-Length",
														"value": "0",
														"type": "text",
														"disabled": true
													}
												],
												"body": {
													"mode": "raw",
													"raw": "maid,first_name,last_name,email,gender,city,state,created\n201,Sandeep_csv,Aulakh_csv,saulakh+ntodemo.com,M,NYC,NY,2021-10-22T09:11:11.816319Z\n201,Sandeep_csv1,Aulakh_csv1,saulakh+ntodemo.com,M,NYC,NY,2021-11-22T09:11:11.816319Z\n",
													"options": {
														"raw": {
															"language": "text"
														}
													}
												},
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/78f56f55-c00a-4e20-ab7d-03307a319ff2/batches"
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"accepted\": true\n}"
										}
									]
								},
								{
									"name": "Close Job",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "7ace53fb-42a7-4992-9e36-15b0590b1dd1",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"_postman_id": "2b055d92-87ea-4067-809d-eec9ae2a677d",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "PATCH",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n   \"state\" : \"UploadComplete\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/f49b6abd-db8f-4d49-a03e-d2e9ac1938f1"
									},
									"response": [
										{
											"id": "b85b6ab3-e939-4854-a608-e2823fe43ed2",
											"name": "Close Job",
											"originalRequest": {
												"method": "PATCH",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\n   \"state\" : \"UploadComplete\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/b1b79aa2-b846-403a-b41f-d89932f0b2ae"
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"object\": \"runner_profiles\",\n    \"id\": \"b1b79aa2-b846-403a-b41f-d89932f0b2ae\",\n    \"operation\": \"upsert\",\n    \"sourceName\": \"Event_API\",\n    \"createdById\": \"0053y00000FUGfBAAX\",\n    \"createdDate\": \"2021-10-28T17:14:58.692891Z\",\n    \"systemModstamp\": \"2021-10-28T19:41:02.292527Z\",\n    \"state\": \"UploadComplete\",\n    \"contentType\": \"CSV\",\n    \"apiVersion\": \"v1\"\n}"
										}
									]
								},
								{
									"name": "Abort Job",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "41240445-2972-43fc-aba6-31dbd6982af2",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"_postman_id": "41fb9ecb-7898-47af-88a8-5aac5e0b2155",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "PATCH",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n   \"state\" : \"Aborted\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/8727e413-7f8a-4b79-86e0-985cc4e486f0"
									},
									"response": [
										{
											"id": "0615f78c-1e73-469d-8481-4f8f8040ad4d",
											"name": "Abort Job",
											"originalRequest": {
												"method": "PATCH",
												"header": [],
												"body": {
													"mode": "raw",
													"raw": "{\n   \"state\" : \"Aborted\"\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/e70934e8-2877-4660-872b-f3d9be4b9ad7"
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"object\": \"runner_profiles\",\n    \"id\": \"e70934e8-2877-4660-872b-f3d9be4b9ad7\",\n    \"operation\": \"upsert\",\n    \"sourceName\": \"Event_API\",\n    \"createdById\": \"0053y00000FUGfBAAX\",\n    \"createdDate\": \"2021-10-28T19:41:47.419923Z\",\n    \"systemModstamp\": \"2021-10-28T19:42:03.035256Z\",\n    \"state\": \"Aborted\",\n    \"contentType\": \"CSV\",\n    \"apiVersion\": \"v1\"\n}"
										}
									]
								},
								{
									"name": "Delete Job",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "a97dfd52-d032-4fff-b77a-89e03944c17a",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"_postman_id": "065fafc9-c0c0-4fd9-a11b-cb244d49ac2e",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "DELETE",
										"header": [],
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/363118e9-1863-4a46-87d2-708d0875c58b"
									},
									"response": [
										{
											"id": "d1b44864-9236-4ad8-b922-6a63a9566a96",
											"name": "Delete Job",
											"originalRequest": {
												"method": "DELETE",
												"header": [],
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/b1b79aa2-b846-403a-b41f-d89932f0b2ae"
											},
											"_postman_previewlanguage": "Text",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": ""
										}
									]
								},
								{
									"name": "Get Job Info",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "48b7c071-1522-4025-89ab-2f599738f8a6",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"_postman_id": "05d7c211-ed2c-4c0d-aea6-04b688341699",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [],
										"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/f49b6abd-db8f-4d49-a03e-d2e9ac1938f1"
									},
									"response": [
										{
											"id": "1f973879-c3e7-4722-8e6b-ee6e5a9ae71b",
											"name": "Get Job Info",
											"originalRequest": {
												"method": "GET",
												"header": [],
												"url": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs/b1b79aa2-b846-403a-b41f-d89932f0b2ae"
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"object\": \"runner_profiles\",\n    \"id\": \"b1b79aa2-b846-403a-b41f-d89932f0b2ae\",\n    \"operation\": \"upsert\",\n    \"sourceName\": \"Event_API\",\n    \"createdById\": \"0053y00000FUGfBAAX\",\n    \"createdDate\": \"2021-10-28T17:14:58.692891Z\",\n    \"systemModstamp\": \"2021-10-28T17:14:58.692891Z\",\n    \"state\": \"Open\",\n    \"contentType\": \"CSV\",\n    \"apiVersion\": \"v1\",\n    \"contentUrl\": \"/api/v1/ingest/jobs/b1b79aa2-b846-403a-b41f-d89932f0b2ae/batches\",\n    \"retries\": 0,\n    \"totalProcessingTime\": 0\n}"
										}
									]
								},
								{
									"name": "Get All Jobs",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "de3121ab-662f-4aa8-8d3b-afd80404c5a0",
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"_postman_id": "8666614b-2897-4968-986c-98ef35d4ca85",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs?limit=50&offset=&orderby=&state=",
											"protocol": "https",
											"host": [
												"{{dne_cdpOffcoreUrl}}"
											],
											"path": [
												"api",
												"v1",
												"ingest",
												"jobs"
											],
											"query": [
												{
													"key": "limit",
													"value": "50"
												},
												{
													"key": "offset",
													"value": ""
												},
												{
													"key": "orderby",
													"value": ""
												},
												{
													"key": "state",
													"value": ""
												}
											]
										}
									},
									"response": [
										{
											"id": "85227c3b-ad47-420b-b666-2157c436d4e4",
											"name": "Get All Jobs",
											"originalRequest": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "https://{{dne_cdpOffcoreUrl}}/api/v1/ingest/jobs?limit=50&offset&orderby&state=",
													"protocol": "https",
													"host": [
														"{{dne_cdpOffcoreUrl}}"
													],
													"path": [
														"api",
														"v1",
														"ingest",
														"jobs"
													],
													"query": [
														{
															"key": "limit",
															"value": "50"
														},
														{
															"key": "offset",
															"value": null
														},
														{
															"key": "orderby",
															"value": null
														},
														{
															"key": "state",
															"value": ""
														}
													]
												}
											},
											"_postman_previewlanguage": "json",
											"header": [],
											"cookie": [],
											"responseTime": null,
											"body": "{\n    \"data\": [\n        {\n            \"object\": \"runner_profiles\",\n            \"id\": \"b1b79aa2-b846-403a-b41f-d89932f0b2ae\",\n            \"operation\": \"upsert\",\n            \"sourceName\": \"Event_API\",\n            \"createdById\": \"0053y00000FUGfBAAX\",\n            \"createdDate\": \"2021-10-28T17:14:58.692891Z\",\n            \"systemModstamp\": \"2021-10-28T17:14:58.692891Z\",\n            \"state\": \"Open\",\n            \"contentType\": \"CSV\",\n            \"apiVersion\": \"v1\",\n            \"contentUrl\": \"/api/v1/ingest/jobs/b1b79aa2-b846-403a-b41f-d89932f0b2ae/batches\",\n            \"retries\": 0,\n            \"totalProcessingTime\": 0\n        }\n    ]\n}"
										}
									]
								}
							],
							"_postman_id": "f1de321a-7a5e-45b6-b14b-bd48c0864700",
							"_postman_isSubFolder": true
						}
					],
					"_postman_id": "daa337d5-58c2-4b2a-a577-2b321407b7e3",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								],
								"id": "4678f890-8b0e-4417-8395-b71cdfda6c15"
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								],
								"id": "72c7343a-32d4-464a-93cd-68e073184632"
							}
						}
					],
					"_postman_isSubFolder": true
				}
			],
			"_postman_id": "54848cd9-b411-48d7-890c-f3bfde7f6577",
			"description": "The Salesforce CDP allows you to perform some of the Salesforce CDP application tasks programmatically via a [Direct API](https://developer.salesforce.com/docs/atlas.en-us.c360a_api.meta/c360a_api/c360a_api_quick_start.htm) to the underlying data store. \n\nThis is the preferred approach to API connections however if you need access to the APIs in things such as flow, we support access via the Salesforce Connect APIs.",
			"auth": {
				"type": "bearer",
				"bearer": {
					"token": "{{dne_cdpOffcoreToken}}"
				}
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "bf3c002d-8e3d-43be-9e1f-68a23b2750e9",
						"type": "text/javascript",
						"exec": [
							"/* Begin Token Refresh Logic */",
							"const context = pm.environment.name ? pm.environment : pm.collectionVariables;",
							"",
							"const cdpTokenRefreshTime = context.get(\"dne_cdpTokenRefreshTime\") || 0;",
							"console.log(\"token refresh time: \" + cdpTokenRefreshTime);",
							"",
							"const cdpTokenAge = Math.round((Date.now() - cdpTokenRefreshTime) / 60000);",
							"console.log (\"cdpTokenAge: \" + cdpTokenAge);",
							"",
							"if (cdpTokenAge < 115) {",
							"    console.log(\"cdp token valid\");",
							"} else {",
							"",
							"console.log(\"refreshing token...\");",
							"context.set(\"dne_cdpTokenRefreshTime\", Date.now());",
							"",
							"var navigator = {}; //fake a navigator object for the lib",
							"var window = {}; //fake a window object for the lib",
							"",
							"// load external library to sign jwt - https://kjur.github.io/jsrsasign/",
							"pm.sendRequest(\"https://cdnjs.cloudflare.com/ajax/libs/jsrsasign/10.1.13/jsrsasign-all-min.js\", (error, response) => {",
							"    if (error || response.code !== 200) {",
							"        pm.expect.fail('Could not load jsrsasign library');",
							"    }",
							"    eval(response.text());",
							"",
							"    // define jwt header",
							"    const header = {",
							"        \"alg\": \"RS256\",",
							"        \"typ\": \"JWT\"",
							"    };",
							"",
							"    // define jwt payload",
							"    const payload = {",
							"        \"iss\": context.get('clientId'),",
							"        \"sub\": context.get('userName'),",
							"        \"aud\": context.get('loginUrl'),",
							"        \"exp\": Math.round(Date.now() / 1000)",
							"    }",
							"",
							"    //create and sign jwt ",
							"    const jwt = KJUR.jws.JWS.sign(null, header, payload, context.get('privateKey'));",
							"    console.log(\"JWT Assertion: \" + jwt);",
							"    context.set('dne_cdpAssertion', jwt);",
							"",
							"    // S2S Access Token Payload",
							"    const s2sFlow = {",
							"        url: 'https://' + context.get(\"loginUrl\") + '/services/oauth2/token',",
							"        method: 'POST',",
							"        header: 'application/x-www-form-urlencoded',",
							"        body: {",
							"            mode: 'urlencoded',",
							"            urlencoded: [{",
							"                    key: \"grant_type\",",
							"                    value: \"urn:ietf:params:oauth:grant-type:jwt-bearer\"",
							"                },",
							"                {",
							"                    key: \"assertion\",",
							"                    value: jwt",
							"                }",
							"            ]",
							"        }",
							"    };",
							"",
							"    // S2S Access Token Request",
							"    pm.sendRequest(s2sFlow, (err, res) => {",
							"        if (err) {",
							"            console.error(err);",
							"        } else {",
							"            const responseJson = res.json();",
							"            console.log(responseJson);",
							"            context.set(\"dne_cdpAuthToken\", responseJson.access_token);",
							"            context.set(\"dne_cdpInstanceUrl\", responseJson.instance_url);",
							"",
							"            // start exchange flow",
							"",
							"            // CDP Token Exchange Payload",
							"            const cdpFlow = {",
							"                url: context.get('dne_cdpInstanceUrl') + '/services/a360/token',",
							"                method: 'POST',",
							"                header: 'application/x-www-form-urlencoded',",
							"                body: {",
							"                    mode: 'urlencoded',",
							"                    urlencoded: [{",
							"                            key: \"grant_type\",",
							"                            value: \"urn:salesforce:grant-type:external:cdp\"",
							"                        },",
							"                        {",
							"                            key: \"subject_token\",",
							"                            value: context.get('dne_cdpAuthToken')",
							"                        },",
							"                        {",
							"                            key: \"subject_token_type\",",
							"                            value: \"urn:ietf:params:oauth:token-type:access_token\"",
							"                        }",
							"                    ]",
							"                }",
							"            };",
							"",
							"            // CDP Token Exchange Request",
							"            pm.sendRequest(cdpFlow, (err, res) => {",
							"                if (err) {",
							"                    console.error(err);",
							"                } else {",
							"                    const responseJson = res.json();",
							"                    console.log(responseJson);",
							"                    context.set(\"dne_cdpOffcoreToken\", responseJson.access_token);",
							"                    context.set(\"dne_cdpOffcoreUrl\", responseJson.instance_url);",
							"                }",
							"            });",
							"            //end exchange flow",
							"",
							"        }",
							"    });",
							"}); ",
							"}",
							"/* End Token Refresh Logic */",
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "783ebf7d-ba1d-445f-a8dc-94bacde328a4",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Connect APIs",
			"item": [
				{
					"name": "Auth",
					"item": [
						{
							"name": "Auth Request",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "2b401ea9-bacd-49db-a20b-8bf22174b267",
										"exec": [
											"const context = pm.environment.name ? pm.environment : pm.collectionVariables;",
											"",
											"const response = JSON.parse(responseBody);",
											"",
											"if (response.access_token) {",
											"  tests[\"Body has accessToken\"] = true; ",
											"  context.set(\"dne_cdpAuthToken\", response.access_token);",
											"  context.set(\"dne_cdpInstanceUrl\", response.instance_url);",
											"}",
											"else {",
											"  tests[\"Body has access_token\"] = false;",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"_postman_id": "6856d783-fea2-456f-84af-a23b0cfc88b9",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "grant_type",
											"value": "password",
											"type": "text"
										},
										{
											"key": "username",
											"value": "{{userName}}",
											"type": "text"
										},
										{
											"key": "password",
											"value": "{{password}}{{securityToken}}",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "{{clientId}}",
											"type": "text"
										},
										{
											"key": "client_secret",
											"value": "{{clientSecret}}",
											"type": "text"
										}
									],
									"options": {
										"urlencoded": {}
									}
								},
								"url": "https://{{loginUrl}}/services/oauth2/token"
							},
							"response": []
						}
					],
					"_postman_id": "429bbba7-0d51-45f2-9e16-13cd0385958b",
					"auth": {
						"type": "noauth"
					},
					"_postman_isSubFolder": true
				}
			],
			"_postman_id": "27dac9f4-e75a-49cf-a294-fbe248bffa54",
			"description": "The [CONNECT APIs](https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_customer_360_audiences_resources.htm) allow users to make the same API calls directly from Salesforce’s connect interface. This allows for these APIs to be called in flows as well. \n\nCalling APIs directly using the non connect method typically offers the best performance. However, there are use cases where that doesn't make sense. Therefore, please be advised that calling CONNECT APIs directly does not conform to the same SLAs that calling the API directly offers.",
			"auth": {
				"type": "bearer",
				"bearer": {
					"token": "{{dne_cdpAuthToken}}"
				}
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "0d3f41b8-39aa-4579-ac96-6c7954d8d11e",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "bc668f2a-0d2a-4808-a9a9-258c20b92deb",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		}
	],
	"auth": {
		"type": "jwt",
		"jwt": {
			"algorithm": "HS256",
			"isSecretBase64Encoded": false,
			"payload": "{}",
			"addTokenTo": "header",
			"headerPrefix": "Bearer",
			"queryParamKey": "token",
			"header": "{}"
		}
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "8445dbc1-8fc2-463a-9a97-34d36748fb03",
				"type": "text/javascript",
				"exec": [
					"/* Begin Usage Tracking */",
					"pm.sendRequest('www.google-analytics.com/collect?v=1&tid=UA-114173005-2&cid=1&t=pageview&dh=mcexperts.ninja&dp=/projects/postman/collection/run&dt=PostmanC360CollectionRun');",
					"/* End Usage Tracking */",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "215e9132-28cb-48e7-84ae-64963e7b6ec5",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "b4555bc8-12c0-48a9-97cc-6a470fe63a22",
			"key": "loginUrl",
			"value": "login.salesforce.com",
			"type": "string"
		},
		{
			"id": "a2d83c1e-bc8b-4e7e-8025-6cfa0e85bf11",
			"key": "version",
			"value": "52.0",
			"type": "string"
		},
		{
			"id": "fe828bcd-1c7c-4d3f-b523-a66d55b5382c",
			"key": "clientId",
			"value": "",
			"type": "string"
		},
		{
			"id": "534281ac-9bd2-454a-98a8-872a25b9acae",
			"key": "clientSecret",
			"value": "",
			"type": "string"
		},
		{
			"id": "4cd922c5-4d05-4982-b354-a1dc453bb507",
			"key": "privateKey",
			"value": "",
			"type": "string"
		},
		{
			"id": "7c447936-97cb-4d48-8243-399e4f28f843",
			"key": "userName",
			"value": "",
			"type": "string"
		},
		{
			"id": "b82418dc-acf9-4be9-85b8-004c26b67760",
			"key": "securityToken",
			"value": "",
			"type": "string"
		},
		{
			"id": "3ebe2c00-6361-49c6-bde9-b4e543447c88",
			"key": "password",
			"value": "",
			"type": "string"
		},
		{
			"id": "8de031d0-f73e-4e77-98be-d35c8fd5ac6c",
			"key": "dne_cdpOffcoreUrl",
			"value": "",
			"type": "string"
		},
		{
			"id": "70c68437-1c3d-4c41-a47f-d455d018fced",
			"key": "dne_cdpOffcoreToken",
			"value": "",
			"type": "string"
		},
		{
			"id": "c7b7fdf1-b9ca-44c9-9ecc-368bf01829cf",
			"key": "dne_cdpInstanceUrl",
			"value": "",
			"type": "string"
		},
		{
			"id": "3f92c9ca-86a3-4e28-bb77-31e6b84df7cd",
			"key": "dne_cdpAuthToken",
			"value": "",
			"type": "string"
		},
		{
			"id": "4ca78b8b-8bab-42a2-82a6-ad7f5c1ac315",
			"key": "dne_cdpTokenRefreshTime",
			"value": "",
			"type": "string"
		},
		{
			"id": "3c371838-5747-44f5-890f-638a29a2a9d4",
			"key": "dne_cdpAssertion",
			"value": "",
			"type": "string"
		}
	]
}